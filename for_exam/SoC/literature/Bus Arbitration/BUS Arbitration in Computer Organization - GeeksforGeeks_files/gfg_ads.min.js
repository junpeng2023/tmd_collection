/*  12-03-2024 16:05 IST [Deutschland] */
var parentDiv = document.getElementById('GFG_AD_InContent_Desktop_BTF_650x250');
if (parentDiv) {
    parentDiv.style.maxHeight = '';
    parentDiv.style.display = 'flex';
    parentDiv.style.justifyContent = 'center';
    parentDiv.style.flexWrap = 'wrap';
    parentDiv.style.gap = '1.5em';
    var childDiv1 = document.createElement('div');
    childDiv1.id = 'GFG_AD_InContent_Desktop_BTF_300x250_1';
    childDiv1.style.width = '320px';
    childDiv1.style.height = '250px';
    parentDiv.appendChild(childDiv1);
    var childDiv2 = document.createElement('div');
    childDiv2.id = 'GFG_AD_InContent_Desktop_BTF_300x250_2';
    childDiv2.style.width = '320px';
    childDiv2.style.height = '250px';
    parentDiv.appendChild(childDiv2);
}
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
googletag.cmd.push(function () {
    googletag.pubads().disableInitialLoad();
});
! function (a9, a, p, s, t, A, g) {
    if (a[a9]) return;

    function q(c, r) {
        a[a9]._Q.push([c, r])
    }
    a[a9] = {
        init: function () {
            q("i", arguments)
        },
        fetchBids: function () {
            q("f", arguments)
        },
        setDisplayBids: function () { },
        targetingKeys: function () {
            return []
        },
        _Q: []
    };
    A = p.createElement(s);
    A.async = !0;
    A.src = t;
    g = p.getElementsByTagName(s)[0];
    g.parentNode.insertBefore(A, g)
}("apstag", window, document, "script", "//c.amazon-adsystem.com/aax2/apstag.js");
const blockedLineItems = [{
    "lineItemId": 6488843683,
    "refresh": {
        "status": "off",
        "time": 30
    }
}];
const TempTagAdUnit = {
    "GFG_AD_Desktop_RightSideBar_ATF_300x600": {
        "code": "/27823234/22683361272",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 600],
                        [160, 600],
                        [120, 600],
                        [300, 250],
                        [300, 50],
                        [300, 100],
                        [250, 250],
                        [180, 150]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_Desktop_RightSideBar_BTFdocked_300x600": {
        "code": "/27823234/22683361281",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            },
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 600],
                        [160, 600],
                        [120, 600],
                        [300, 250],
                        [300, 50],
                        [300, 100],
                        [250, 250],
                        [180, 150]
                    ]
                }]
            }
        }
    },
    "GFG_AD_Desktop_RightSideBar_ATF_300x250_2": {
        "code": "/27823234/GFG_Desktop_RightSideBar_ATF_300x250_2",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            },
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [250, 250],
                        [300, 50],
                        [300, 100],
                        [300, 250]
                    ]
                }]
            }
        }
    },
    "GFG_AD_gfg_archive_ATF_728x250": {
        "code": "/27823234/gfg_archive_ATF_728x250",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [728, 90],
                        [728, 250],
                        [300, 250],
                        [250, 250],
                        [300, 50],
                        [300, 100],
                        [320, 180],
                        [640, 280],
                        [650, 250],
                        [180, 150],
                        [320, 50]
                    ]
                }]
            }
        }
    },
    "GFG_AD_gfg_archive_MTF_728x250": {
        "code": "/27823234/GFG_Archive_MTF_650x250",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [650, 250],
                        [300, 250],
                        [300, 50]
                    ]
                }]
            }
        }
    },
    "GFG_AD_Desktop_RightSideBar_MTF_300x250": {
        "code": "/27823234/GFG_Desktop_RightSideBar_MTF_300x250",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            },
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [250, 250],
                        [300, 100],
                        [300, 50]
                    ]
                }]
            }
        }
    },
    "GFG_AD_gfg_archive_ATF_728x280": {
        "code": "/27823234/GFG_Archive_ATF_650x250",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [350, 50],
                        [728, 90],
                        [320, 50],
                        [300, 50]
                    ]
                }]
            }
        },
        "screen": {
            "is": "greaterThan",
            "width": 1500
        }
    },
    "GFG_AD_Dev_Desktop_RightSideBar_ATF_300x600": {
        "code": "/27823234/Dev_Desktop_RightSideBar_ATF_300x600",
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 600],
                        [160, 600],
                        [120, 600],
                        [300, 250]
                    ]
                }]
            }
        },
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        }
    },
    "GFG_AD_Dev_Desktop_RightSideBar_BTF_300x600": {
        "code": "/27823234/Dev_Desktop_RightSideBar_BTF_300x600",
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 600],
                        [160, 600],
                        [120, 600],
                        [300, 250]
                    ]
                }]
            }
        },
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        }
    },
    "GFG_AD_Dev_Desktop_RightSideBar_ATF_300x250": {
        "code": "/27823234/Dev_Desktop_RightSideBar_ATF_300x250",
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [250, 250],
                        [300, 50],
                        [300, 100],
                        [300, 250]
                    ]
                }]
            }
        },
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        }
    },
    "GFG_AD_Dev_Desktop_LeftSideBar_BTF_160x600": {
        "code": "/27823234/Dev_Desktop_LeftSideBar_BTF_160x600",
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [120, 600],
                        [160, 600]
                    ]
                }]
            }
        },
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        }
    },
    "GFG_AD_Desktop_MTF_Postcontent_728x90": {
        "code": "/27823234/GFG_Desktop_MTF_Postcontent_728x90",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [728, 90],
                        [300, 50]
                    ]
                }]
            }
        }
    },
    "GFG_AD_Desktop_ATF_300x100": {
        "code": "/27823234/GFG_Desktop_ATF_300x100",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 100],
                        [300, 50]
                    ]
                }]
            }
        }
    },
    "GFG_AD_Desktop_InContent_ATF_336x280": {
        "code": "/27823234/GFG_Desktop_PostContent_336x280",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [336, 280],
                        [300, 250],
                        [300, 100],
                        [320, 180],
                        [320, 50],
                        [320, 50],
                        [180, 150],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent": {
        "code": "/27823234/gfg_outstream_incontent",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_InContent_Desktop_728x280": {
        "code": "/27823234/GFG_InContent_Desktop_728x280",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [640, 280],
                        [300, 250],
                        [336, 280],
                        [300, 100],
                        [728, 280],
                        [728, 90],
                        [650, 250],
                        [320, 50],
                        [180, 150]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent-2": {
        "code": "/27823234/gfg_outstream_incontent_2",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent-4": {
        "code": "/27823234/gfg_outstream_incontent_3",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent-6": {
        "code": "/27823234/gfg_outstream_incontent_4",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent-3": {
        "code": "/27823234/gfg_outstream_incontent_5",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent-5": {
        "code": "/27823234/gfg_outstream_incontent_6",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_gfg_outstream_incontent-7": {
        "code": "/27823234/gfg_outstream_incontent_7",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [336, 280],
                        [320, 180],
                        [728, 90]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 640,
                "h": 480,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [640, 480]
                }]
            }
        }
    },
    "GFG_AD_InContent_Desktop_BTF_300x250_1": {
        "code": "/27823234/GFG_InContent_Desktop_BTF_300x250_1",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [320, 250],
                        [300, 50],
                        [320, 50],
                        [180, 150]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 300,
                "h": 250,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [300, 250]
                }]
            }
        }
    },
    "GFG_AD_InContent_Desktop_BTF_300x250_2": {
        "code": "/27823234/GFG_InContent_Desktop_BTF_300x250_2",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [300, 250],
                        [320, 250],
                        [300, 50],
                        [320, 50],
                        [180, 150]
                    ]
                }]
            },
            "video": {
                "context": "outstream",
                "placement": 2,
                "plcmt": 4,
                "minduration": 5,
                "maxduration": 30,
                "api": [1, 2],
                "mimes": ["video/x-ms-wmv", "video/mp4", "video/3gpp", "application/javascript"],
                "protocols": [2, 3, 5, 6, 7, 8],
                "playbackmethod": [2],
                "linearity": 2,
                "w": 300,
                "h": 250,
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "playerSize": [300, 250]
                }]
            }
        }
    },
    "GFG_AD_gfg_desktop_ATF_728x90": {
        "code": "/27823234/GFG_Desktop_ATF_728x90",
        "headerBidding": "on",
        "refresh": {
            "status": "on",
            "time": 30,
            "notInView": false,
            "backgroundRefresh": false
        },
        "mediaTypes": {
            "banner": {
                "sizeConfig": [{
                    "minViewPort": [0, 0],
                    "sizes": [
                        [728, 90]
                    ]
                }]
            }
        }
    }
};
let TagAdUnit = {};
Object.keys(TempTagAdUnit).forEach(function (key) {
    if (TempTagAdUnit[key].hasOwnProperty('screen')) {
        if (TempTagAdUnit[key]['screen']['is'] == 'greaterThan' && window.innerWidth > TempTagAdUnit[key]['screen']['width']) {
            TagAdUnit[key] = TempTagAdUnit[key];
        }
        if (TempTagAdUnit[key]['screen']['is'] == 'smallerThan' && window.innerWidth < TempTagAdUnit[key]['screen']['width']) {
            TagAdUnit[key] = TempTagAdUnit[key];
        }
    } else {
        TagAdUnit[key] = TempTagAdUnit[key];
    }
});
const bidders = [{
    "bidder": "ix",
    "params": {
        "siteId": "777856"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "triplelift",
    "params": {
        "inventoryCode": "gfg_desktop_300x600"
    },
    "sizes": [
        [300, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "appnexus",
    "params": {
        "placementId": 24617164,
        "allowSmallerSizes": 1
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "appnexus",
    "params": {
        "placementId": 24617298,
        "allowSmallerSizes": true
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["video"]
    }]
}, {
    "bidder": "rubicon",
    "params": {
        "accountId": 24430,
        "siteId": 417414,
        "zoneId": 2358444
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "rubicon",
    "params": {
        "accountId": 24430,
        "siteId": 417414,
        "zoneId": 2358444,
        "video": {
            "size_id": 203,
            "language": "en"
        }
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["video"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "13366"
    },
    "sizes": [
        [300, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557323415",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizes": [
        [300, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557892812",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["video"]
    }]
}, {
    "bidder": "triplelift",
    "params": {
        "inventoryCode": "gfg_desktop_728x90"
    },
    "sizes": [
        [728, 90]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "triplelift",
    "params": {
        "inventoryCode": "gfg_desktop_300x250"
    },
    "sizes": [
        [300, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "triplelift",
    "params": {
        "inventoryCode": "gfg_desktop_120x600"
    },
    "sizes": [
        [120, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "triplelift",
    "params": {
        "inventoryCode": "gfg_desktop_160x600"
    },
    "sizes": [
        [160, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "triplelift",
    "params": {
        "inventoryCode": "gfg_desktop_336x280"
    },
    "sizes": [
        [336, 280]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557323420",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizes": [
        [120, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557323418",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizes": [
        [160, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557323416",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizes": [
        [300, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557323417",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizes": [
        [336, 280]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "openx",
    "params": {
        "unit": "557323402",
        "delDomain": "geeksforgeeks-d.openx.net"
    },
    "sizes": [
        [728, 90]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "19024"
    },
    "sizes": [
        [300, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "16266"
    },
    "sizes": [
        [120, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "16265"
    },
    "sizes": [
        [336, 280]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "13370"
    },
    "sizes": [
        [320, 50]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "43047"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["video"]
    }]
}, {
    "bidder": "nextMillennium",
    "params": {
        "placement_id": "13368"
    },
    "sizes": [
        [728, 90]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "bcmssp",
    "params": {
        "publisherId": 20696
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "pubmatic",
    "params": {
        "publisherId": "162080",
        "adSlot": "4651340"
    },
    "sizes": [
        [300, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "pubmatic",
    "params": {
        "publisherId": "162080",
        "adSlot": "4651335"
    },
    "sizes": [
        [160, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "pubmatic",
    "params": {
        "publisherId": "162080",
        "adSlot": "4651341"
    },
    "sizes": [
        [300, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "pubmatic",
    "params": {
        "publisherId": "162080",
        "adSlot": "4558096"
    },
    "sizes": [
        [336, 280]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "pubmatic",
    "params": {
        "publisherId": "162080",
        "adSlot": "4558095"
    },
    "sizes": [
        [320, 50]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "pubmatic",
    "params": {
        "publisherId": "162080",
        "adSlot": "4651345"
    },
    "sizes": [
        [728, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner", "video"]
    }]
}, {
    "bidder": "sharethrough",
    "params": {
        "pkey": "Tl6LYdsbny1uAUIUYqjzVyOh"
    },
    "sizes": [
        [728, 90]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "sharethrough",
    "params": {
        "pkey": "XzmCfWpXK3uCl28FXzaca8Mt"
    },
    "sizes": [
        [300, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "sharethrough",
    "params": {
        "pkey": "WzZhFMXwtShvIVWPfRAR1h1L"
    },
    "sizes": [
        [300, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "sharethrough",
    "params": {
        "pkey": "CM5x1LHsSFSoq1f86j2jHSl8"
    },
    "sizes": [
        [160, 600]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "sharethrough",
    "params": {
        "pkey": "qLmbzMYmIUkOZl4ImyoFqEog"
    },
    "sizes": [
        [336, 280]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "sharethrough",
    "params": {
        "pkey": "ZyjEHQQ0nRGKuch7TDiGThXo"
    },
    "sizes": [
        [970, 250]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "amx",
    "params": {
        "tagId": "Z2Vla3Nmb3JnZWVrcw"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "nobid",
    "params": {
        "siteId": 22890339683
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "teads",
    "params": {
        "pageId": 168909,
        "placementId": 183780
    },
    "sizes": [
        [336, 280]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["video"]
    }]
}, {
    "bidder": "teads",
    "params": {
        "pageId": 168910,
        "placementId": 183781
    },
    "sizes": [
        [300, 50]
    ],
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "minutemedia",
    "params": {
        "org": "01gx8wqggk32"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "vidazoo",
    "params": {
        "cId": "64db31e92888555c21cb7310",
        "pId": "59ac17c192832d0011283fe3",
        "subDomain": "exchange"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "rise",
    "params": {
        "org": "64d0bde24b786c0001487768"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}, {
    "bidder": "kueezrtb",
    "params": {
        "cId": "65927e12b7743443fbc090c1",
        "pId": "65lk7c192882r0011813fn9"
    },
    "sizeConfig": [{
        "minViewPort": [0, 0],
        "relevantMediaTypes": ["banner"]
    }]
}];

function render(bid) {
    try {
        const ELEMENT_ID = bid.adUnitCode;
        const config = {
            code: ELEMENT_ID,
        };
        if (bid.hasOwnProperty('vastUrl')) {
            config['vastUrl'] = fillMacros(bid.vastUrl, bid);
        } else {
            config['vastXml'] = fillMacros(bid.vastXml, bid);
        }
        const rendererId = "geeksforgeeks-gfg_outstream_responsive";
        const ele = document.getElementById(config.code);
        const renderer = window.bluebillywig.renderers.find((renderer) => renderer._id === rendererId);
        if (renderer) {
            renderer.bootstrap(config, ele);
        }
        window.bluebillywig = window.bluebillywig || {};
        window.bluebillywig.cmd = window.bluebillywig.cmd || [];
        window.bluebillywig.cmd.push({
            playerAlias: ELEMENT_ID,
            callback: ($$api) => {
                $$api.on('adstarted aderror adnotfound error', ({
                    type
                }) => {
                    trackEventMetrics(type, bid, ["error", "aderror", "adnotfound"].includes(type));
                });
            }
        });
    } catch (e) {
        trackEventMetrics('exception', bid, true, e);
    }
}
let TagAdUnitCopy = JSON.parse(JSON.stringify(TagAdUnit));
var adUnits = [];
Object.keys(TagAdUnit).forEach(function (key) {
    const participatingBidders = [];
    if (TagAdUnit[key]['mediaTypes'].hasOwnProperty('banner')) {
        const adUnitSizes = TagAdUnit[key]["mediaTypes"]["banner"]["sizeConfig"][0]["sizes"];
        bidders.forEach(bidder => {
            if (bidder.hasOwnProperty('sizes')) {
                if (areArrayIntersecting(bidder['sizes'], adUnitSizes)) {
                    participatingBidders.push({
                        bidder: bidder.bidder,
                        params: bidder.params,
                        sizeConfig: bidder.sizeConfig
                    });
                }
            } else {
                participatingBidders.push({
                    bidder: bidder.bidder,
                    params: bidder.params,
                    sizeConfig: bidder.sizeConfig
                });
            }
        });
    } else {
        bidders.forEach(bidder => {
            participatingBidders.push({
                bidder: bidder.bidder,
                params: bidder.params,
                sizeConfig: bidder.sizeConfig
            });
        });
    }
    if (TagAdUnit[key].mediaTypes.video) {
        TagAdUnit[key].mediaTypes.video.renderer = {
            render,
            url: "https://geeksforgeeks.bbvms.com/r/gfg_outstream_responsive.js",
        }
    }
    adUnits.push({
        code: key,
        mediaTypes: TagAdUnit[key].mediaTypes,
        bids: participatingBidders,
    });
});
var FAILSAFE_TIMEOUT = 3000;
var PREBID_TIMEOUT = 3000;
var pbjs = pbjs || {};
pbjs.que = pbjs.que || [];
pbjs.que.push(function () {
    pbjs.onEvent('bidWon', function (bid) {
        if (bid.mediaType === 'video') trackEventMetrics('bidWon', bid);
    });
});
pbjs.que.push(function () {
    pbjs.setConfig({
        enableTIDs: true,
        debug: true,
        currency: {
            "adServerCurrency": "INR",
            "granularityMultiplier": 73,
            "conversionRateFile": "https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json",
            "defaultRates": {
                "USD": {
                    "INR": 80
                }
            }
        },
        useBidCache: true,
        debug: false,
        auctionOptions: {
            suppressStaleRender: true
        },
        consentManagement: {
            gdpr: {
                cmpApi: 'iab',
                timeout: 2000,
                actionTimeout: 10000,
                defaultGdprScope: true,
                rules: [{
                    purpose: "storage",
                    enforcePurpose: true,
                    enforceVendor: true
                }, {
                    purpose: "basicAds",
                    enforcePurpose: true,
                    enforceVendor: true
                }, {
                    purpose: "personalizedAds",
                    enforcePurpose: true,
                    enforceVendor: true
                }]
            },
            gpp: {
                cmpApi: 'iab',
                timeout: 8000
            },
            usp: {
                cmpApi: 'iab',
                timeout: 100
            }
        },
        userSync: {
            filterSettings: {
                iframe: {
                    bidders: '*',
                    filter: 'include'
                }
            },
            userIds: [{
                name: "id5Id",
                params: {
                    partner: 1206,
                    pd: getPartnerData()
                },
                storage: {
                    type: "html5",
                    name: "id5id",
                    expires: 90,
                    refreshInSeconds: 8 * 3600
                }
            }],
            auctionDelay: 50,
            aliasSyncEnabled: true
        },
        bidderTimeout: PREBID_TIMEOUT
    })
});
pbjs.bidderSettings = {
    standard: {
        adserverTargeting: [{
            key: "v3_gfg_hb_bidder",
            val: function (bidResponse) {
                return bidResponse.bidderCode;
            }
        }, {
            key: "v3_gfg_hb_adid",
            val: function (bidResponse) {
                return bidResponse.adId;
            }
        }, {
            key: "v3_gfg_hb_pb",
            val: function (bidResponse) {
                return bidResponse.pbDg;
            }
        }, {
            key: 'v3_gfg_hb_format',
            val: function (bidResponse) {
                return bidResponse.mediaType;
            }
        }],
        rubicon: {
            bidCpmAdjustment: function (bidCpm, bid) {
                return bidCpm * 0.75;
            }
        },
    },
    amx: {
        storageAllowed: true
    },
    appnexus: {
        storageAllowed: true
    },
    brightcom: {
        storageAllowed: true
    },
    colossusssp: {
        storageAllowed: true
    },
    ix: {
        storageAllowed: true
    },
    kueezrtb: {
        storageAllowed: true
    },
    minutemedia: {
        storageAllowed: true
    },
    nextMillenniumnobid: {
        storageAllowed: true
    },
    nobid: {
        storageAllowed: true
    },
    openx: {
        storageAllowed: true
    },
    pubmatic: {
        storageAllowed: true
    },
    pulsepoint: {
        storageAllowed: true
    },
    rise: {
        storageAllowed: true
    },
    rubicon: {
        storageAllowed: true
    },
    sharethrough: {
        storageAllowed: true
    },
    teads: {
        storageAllowed: true
    },
    triplelift: {
        storageAllowed: true
    },
    vidazoo: {
        storageAllowed: true
    }
}
pbjs.que.push(function () {
    pbjs.enableAnalytics({
        provider: 'gfg',
        options: {
            host: "adapi.geeksforgeeks.org",
            pathname: "/analytics/bidresponse/"
        }
    });
    pbjs.addAdUnits(adUnits);
});
apstag.init({
    pubID: 'ea747225-5f2f-4971-b80e-e7cf7cdd1e7b',
    adServer: 'googletag'
});
var refreshableAd = []
var activeViewAd = []
var lazyLoadingDivs = []
var isTabActive;
window.onfocus = function () {
    isTabActive = true;
};
window.onblur = function () {
    isTabActive = Object.values(TempTagAdUnit).some(curr => curr.refresh.backgroundRefresh);
};
googletag.cmd.push(function () {
    googletag.pubads().addEventListener('slotOnload', function (event) {
        var slot = event.slot;
        var tag = slot.getSlotElementId();
        if (TagAdUnit[tag] && TagAdUnit[tag].refresh.status === "on") {
            var refreshtime = parseInt(TagAdUnit[tag].refresh.time);
            setTimeout(() => {
                readyToRefresh(event.slot.getSlotElementId());
            }, refreshtime * 1000);
        }
        if ('GFG_AD_Desktop_Stickyunit_1x1' == slot.getSlotElementId()) {
            document.addEventListener('scroll', scrollEventListener);
        }
        if ('GFG_AD_Dev_Desktop_Stickyunit_1x1' == slot.getSlotElementId()) {
            document.addEventListener('scroll', scrollEventListenerTest);
        }
    });
});
googletag.cmd.push(function () {
    googletag.pubads().addEventListener('slotVisibilityChanged', function (event) {
        var slot = event.slot;
        var index = activeViewAd.indexOf(slot);
        var el = slot.getSlotElementId();
        var slotId = event.slot.getSlotElementId();
        var blockedItemIdx = blockedLineItems.findIndex(curr => curr.lineItemId == event.sourceAgnosticLineItemId);
        if (blockedItemIdx >= 0) {
            let curr = blockedLineItems[blockedItemIdx];
            updateCurrentAdSlot(slotId, curr);
        } else {
            updateCurrentAdSlot(slotId, TagAdUnitCopy[slotId]);
        }
        if (TagAdUnit[el] && (TagAdUnit[el].refresh.status != "on" || TagAdUnit[el].refresh.notInView || TagAdUnit[el].refresh.backgroundRefresh)) {
            return
        }
        if (event.inViewPercentage < 50 && index > -1) {
            activeViewAd.splice(index, 1);
            return
        }
        if (event.inViewPercentage >= 50 && index <= -1) {
            activeViewAd.push(slot);
            return
        }
    });
});
window.addEventListener("load", function () {
    isTabActive = true;
    var elms = document.querySelectorAll('div[id^=GFG_AD_]');
    elms.forEach(tag => {
        divsToLazyLoad = ["GFG_AD_gfg_outstream_incontent-3", "GFG_AD_gfg_outstream_incontent-5", "GFG_AD_gfg_outstream_incontent-7",];
        if (divsToLazyLoad.includes(tag.id)) {
            lazyLoadingDivs.push(tag.id);
        } else {
            trigger(tag.id);
        }
    });
});

function headerBid(slot, adunitcode) {
    pbjs.que.push(function () {
        pbjs.requestBids({
            timeout: PREBID_TIMEOUT,
            adUnitCodes: [adunitcode],
            bidsBackHandler: function () {
                pbjs.setTargetingForGPTAsync([adunitcode]);
                googletag.pubads().refresh([slot]);
            }
        });
    });
}

function canRefreshAdsOnCurrSlot(tagProperties) {
    return tagProperties.refresh.status === "on" && (tagProperties.refresh.notInView || tagProperties.refresh.backgroundRefresh);
}

function getCookie(c_name) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(c_name + "=");
        if (c_start != -1) {
            c_start = c_start + c_name.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) {
                c_end = document.cookie.length;
            }
            return decodeURI(document.cookie.substring(c_start, c_end));
        }
    }
    return "";
}
const gfg_ugen = getCookie('gfg_ugen');
const gfg_utype = getCookie('gfg_utype');
const gfg_uqual = getCookie('gfg_uqual');
const gfg_ugy = getCookie('gfg_ugy');
const gfg_ucc = getCookie('gfg_ucc');
const gfg_ads_exp = getCookie('gfg_ads_exp');

function triggerAd(tag) {
    try {
        var properites = TagAdUnit[tag];
        var code = properites.code;
        var sizes = properites["mediaTypes"]["banner"]["sizeConfig"][0]["sizes"];
        var hb_status = properites.headerBidding;
    } catch (err) {
        console.log("invalid tag id", tag);
        return;
    }
    var adslot = null;
    googletag.cmd.push(function () {
        adslot = googletag.defineSlot(code, sizes, tag).addService(googletag.pubads());
        if (canRefreshAdsOnCurrSlot(properites)) {
            activeViewAd.push(adslot);
        }

        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
    });
    if (hb_status === "on") {
        executeParallelAuctionAlongsidePrebid(code, sizes, tag, adslot);
    } else {
        googletag.cmd.push(function () {
            googletag.pubads().refresh([adslot]);
            googletag.display(tag);
        });
    }
    googletag.cmd.push(function () {
        googletag.display(tag);
    });
    googletag.pubads().addEventListener("slotOnload", (event) => {
        console.log("infinite ", event.slot.getSlotElementId(), "rendered", new Date().toLocaleTimeString());
    });
}

function executeParallelAuctionAlongsidePrebid(code, sizes, tag, slot) {
    var requestManager = {
        adserverRequestSent: false,
        aps: false,
        prebid: false
    };

    function biddersBack() {
        if (requestManager.aps && requestManager.prebid) {
            sendAdserverRequest();
        }
        return;
    }

    function sendAdserverRequest() {
        if (requestManager.adserverRequestSent === true) {
            return;
        }
        requestManager.adserverRequestSent = true;
        googletag.cmd.push(function () {
            googletag.pubads().refresh([slot]);
        });
    }

    function requestHeaderBids() {
        pbjs.que.push(function () {
            pbjs.requestBids({
                timeout: PREBID_TIMEOUT,
                adUnitCodes: [tag],
                bidsBackHandler: function () {
                    pbjs.setTargetingForGPTAsync([tag]);
                    requestManager.prebid = true;
                    biddersBack();
                }
            });
        });
        apstag.fetchBids({
            slots: [{
                slotID: tag,
                slotName: code,
                sizes: sizes
            }]
        }, function (bids) {
            googletag.cmd.push(function () {
                apstag.setDisplayBids();
                requestManager.aps = true;
                biddersBack();
            });
        });
    }
    requestHeaderBids();
    window.setTimeout(function () {
        sendAdserverRequest();
    }, FAILSAFE_TIMEOUT);
}

function adRefresh(slot) {
    var code = slot.getAdUnitPath();
    var tag = slot.getSlotElementId();
    var sizes = TagAdUnit[tag]["mediaTypes"]["banner"]["sizeConfig"][0]["sizes"];
    executeParallelAuctionAlongsidePrebid(code, sizes, tag, slot);
}

function readyToRefresh(el) {
    var index = refreshableAd.indexOf(el);
    if (index <= -1) {
        refreshableAd.push(el);
    }
}

function refreshActiveViewAd() {
    for (let i = 0; i < activeViewAd.length; i++) {
        var slot = activeViewAd[i];
        var el = JSON.parse(JSON.stringify(slot.getSlotElementId()));
        var index = refreshableAd.indexOf(el);
        if (index > -1) {
            refreshableAd.splice(index, 1);
            if (slot.getSlotElementId() == el) {
                adRefresh(slot);
            }
        }
    }
}
const interval = setInterval(function () {
    if (window.isTabActive == true) {
        refreshActiveViewAd();
    }
}, 1000);

function updateCurrentAdSlot(slotId, currSlot) {
    if (TagAdUnit[slotId]) {
        TagAdUnit[slotId].refresh.status = currSlot.refresh.status;
        TagAdUnit[slotId].refresh.time = currSlot.refresh.time;
    }
}

function trigger(tag) {
    var interval1 = setInterval(() => {
        if (googletag.apiReady && pbjs.libLoaded) {
            clearInterval(interval1);
            triggerAd(tag);
        }
    }, 500)
}

function areArrayIntersecting(a, b) {
    for (let i = 0; i < a.length; i++) {
        for (let j = 0; j < b.length; j++) {
            if (a[i][0] == b[j][0] && a[i][1] == b[j][1]) return true;
        }
    }
    return false;
}

function trackEventMetrics(event, bid, isError = false, error = {}) {
    const payload = {
        event: event,
        adId: bid.adId,
        auctionId: bid.auctionId,
        cpm: bid.cpm,
        adUnitCode: bid.adUnitCode,
        bidderCode: bid.bidder || bid.bidderCode,
        creativeId: bid.creativeId,
        mediaType: bid.mediaType,
        size: bid.size,
        height: bid.height,
        width: bid.width,
        url: window.location.pathname,
        eventTimestamp: new Date().toISOString()
    };
    if (isError && bid.hasOwnProperty('vastXml')) payload['vastXml'] = bid.vastXml;
    if (isError && bid.hasOwnProperty('vastUrl')) payload['vastUrl'] = bid.vastUrl;
    if (isError && error.hasOwnProperty('name')) payload['errorName'] = error.name;
    if (isError && error.hasOwnProperty('message')) payload['errorMessage'] = error.message;
    sendLog([payload]);
}

function fillMacros(vast, bid) {
    vast = vast.replaceAll('${AUCTION_PRICE:OXCRYPT}', bid.cpm);
    vast = vast.replaceAll('${AUCTION_PRICE}', bid.cpm);
    vast = vast.replaceAll('${CREATIVE_ID}', bid.creativeId);
    return vast;
}

function sendLog(payload) {
    var xhr = new XMLHttpRequest();
    xhr.withCredentials = true;
    xhr.open("POST", "https://adapi.geeksforgeeks.org/analytics/bideventresponse/");
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.send(JSON.stringify(payload));
}

function getPartnerData() {
    let currentUrl = encodeURI(window.location.href).replace(/%5B/g, '[').replace(/%5D/g, ']');
    let ipv4 = ''
    let userAgent = ''
    document.cookie.split(';').forEach(cookie => {
        const keyValue = cookie.split('=');
        if (keyValue[0].trim() === 'gfg_id5_ipv4') {
            ipv4 = keyValue[1].trim();
        }
        if (keyValue[0].trim() === 'gfg_id5_user_agent') {
            userAgent = keyValue[1].trim();
        }
    });
    let partnerData = [];
    partnerData.push('8=' + currentUrl);
    if (ipv4.length > 0) partnerData.push('10=' + ipv4);
    if (userAgent.length > 0) partnerData.push('12=' + userAgent);
    partnerData = partnerData.join('&');
    return btoa(partnerData);
}

function activateStickyUnitCss() {
    const css = `div#GFG_AD_Desktop_Stickyunit_1x1{display:flex;justify-content:center;align-items:center;width:100%;position:fixed;bottom:0;z-index:1024;background-color:#cacaca;}`;
    const styles = document.createElement('style');
    styles.appendChild(document.createTextNode(css));
    document.getElementsByTagName('head')[0].appendChild(styles);
}
activateStickyUnitCss();

function scrollEventListener() {
    const div = document.getElementById('GFG_AD_Desktop_Stickyunit_1x1');
    if (!div)
        return;
    const childrenLen = div.children.length;
    if (childrenLen == 0)
        return;
    const hideAd = document.createElement('div');
    hideAd.appendChild(function () {
        const spanEl = document.createElement('span');
        spanEl.innerText = "Hide Ad";
        spanEl.setAttribute('class', 'stickyunit-close');
        spanEl.onclick = function () {
            div.style = "display: none; opacity: 0;";
            document.removeEventListener('scroll', scrollEventListener);
        }
        return spanEl;
    }());
    hideAd.setAttribute('class', 'stickyunit-footer');
    const hideAdStyles = document.createElement('style');
    const hideAdCss = `.stickyunit-footer{right:20px;border-top:0;border-top-left-radius:3px;color:#fff;text-decoration:none;text-transform:uppercase;letter-spacing:1px;line-height:1;font-weight:600;font-size:8px;position:fixed;bottom:5px;z-index:1025}.stickyunit-close{color:#fffFFFcc;cursor:pointer;float:right}.stickyunit-close:hover{color:#fff}`;
    hideAdStyles.appendChild(document.createTextNode(hideAdCss));
    document.getElementsByTagName('head')[0].appendChild(hideAdStyles);
    if (window.pageYOffset > 100) {
        if (div.children.length == 1)
            div.appendChild(hideAd);
        div.style = "display:flex;justify-content:center;align-items:center";
    } else {
        div.style = "display: none;";
    }
}

function activateStickyUnitCssTest() {
    const css = `div#GFG_AD_Dev_Desktop_Stickyunit_1x1{display:flex;justify-content:center;align-items:center;width:100%;position:fixed;bottom:0;z-index:1024background-color:#cacaca;}`;
    const styles = document.createElement('style');
    styles.appendChild(document.createTextNode(css));
    document.getElementsByTagName('head')[0].appendChild(styles);
}
activateStickyUnitCssTest();

function scrollEventListenerTest() {
    const div = document.getElementById('GFG_AD_Dev_Desktop_Stickyunit_1x1');
    if (!div)
        return;
    const childrenLen = div.children.length;
    if (childrenLen == 0)
        return;
    const hideAd = document.createElement('div');
    hideAd.appendChild(function () {
        const spanEl = document.createElement('span');
        spanEl.innerText = "Hide Ad";
        spanEl.setAttribute('class', 'stickyunit-close');
        spanEl.onclick = function () {
            div.style = "display: none; opacity: 0;";
            document.removeEventListener('scroll', scrollEventListenerTest);
        }
        return spanEl;
    }());
    hideAd.setAttribute('class', 'stickyunit-footer');
    const hideAdStyles = document.createElement('style');
    const hideAdCss = `.stickyunit-footer{right:20px;border-top:0;border-top-left-radius:3px;color:#fff;text-decoration:none;text-transform:uppercase;letter-spacing:1px;line-height:1;font-weight:600;font-size:8px;position:fixed;bottom:5px;z-index:1025}.stickyunit-close{color:#fffFFFcc;cursor:pointer;float:right}.stickyunit-close:hover{color:#fff}`;
    hideAdStyles.appendChild(document.createTextNode(hideAdCss));
    document.getElementsByTagName('head')[0].appendChild(hideAdStyles);
    if (window.pageYOffset > 100) {
        if (div.children.length == 1)
            div.appendChild(hideAd);
        div.style = "display: inline-block;";
    } else {
        div.style = "display: none;";
    }
}
let adRefreshTriggered = 0;

function calculateDivPositions() {
    return lazyLoadingDivs.map(tag => {
        try {
            var element = document.getElementById(tag);
            if (!element) {
                console.log("Element did not found for tag: " + tag);
            } else {
                var rect = element.getBoundingClientRect();
                return {
                    id: tag,
                    top: rect.top + window.scrollY,
                    bottom: rect.bottom + window.scrollY
                };
            }
        } catch (err) {
            console.log(err.message);
            return null;
        }
    }).filter(Boolean);
}

function handleScrollAdsLoading() {
    var scrollPosition = window.scrollY || window.pageYOffset;
    var triggerPositionVh = 300;
    var triggerPosition = (triggerPositionVh * window.innerHeight) / 100;
    var divPositions = calculateDivPositions();
    divPositions.forEach(div => {
        if (scrollPosition >= div.top - triggerPosition && scrollPosition <= div.bottom + triggerPosition) {
            try {
                var existingSlot = googletag.pubads().getSlots().find(slot => slot.getSlotElementId() === div.id);
                if (!existingSlot) {
                    var properties = TagAdUnit[div.id];
                    var sizes = properties["mediaTypes"]["banner"]["sizeConfig"][0]["sizes"];
                    var slot = googletag.defineSlot(properties.code, sizes, div.id).addService(googletag.pubads());
                    adRefresh(slot);
                    adRefreshTriggered = adRefreshTriggered + 1;
                }
            } catch (err) {
                console.log("Error refreshing ad for div", div.id);
            }
        }
    });
    if (adRefreshTriggered == divPositions.length) {
        console.log("inifinite removeEventListener triggered");
        window.removeEventListener('scroll', handleScrollAdsLoading);
    }
}
window.addEventListener('scroll', handleScrollAdsLoading);
setTimeout(() => {
    googletag.cmd.push(function () {
        interstitialSlot = googletag.defineOutOfPageSlot('/27823234/GFG_Desktop_Interstitial_Fluid', googletag.enums.OutOfPageFormat.INTERSTITIAL);
        if (interstitialSlot) {
            interstitialSlot.addService(googletag.pubads());
        }
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
        googletag.display(interstitialSlot);
        googletag.pubads().refresh([interstitialSlot]);
    });
}, 5000);